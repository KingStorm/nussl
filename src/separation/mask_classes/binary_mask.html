<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>BinaryMask Class &#8212; nussl 0.1.5a10 documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1.5a10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SoftMask Class" href="soft_mask.html" />
    <link rel="prev" title="MaskBase Class" href="mask_base.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          nussl</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../separation_classes.html">Separation Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../evaluation/evaluation_classes.html">Evaluation Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../transformers/transformer_classes.html">Transformer Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Modules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/examples.html">Code Examples</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">BinaryMask Class</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="mask_base.html" title="Previous Chapter: MaskBase Class"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MaskBase Class</span>
    </a>
  </li>
  <li>
    <a href="soft_mask.html" title="Next Chapter: SoftMask Class"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SoftMask Class &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../_sources/src/separation/mask_classes/binary_mask.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="module-separation.masks.binary_mask">
<span id="binarymask-class"></span><span id="binary-mask"></span><h1>BinaryMask Class<a class="headerlink" href="#module-separation.masks.binary_mask" title="Permalink to this headline">¶</a></h1>
<p>The BinaryMask class is for creating a time-frequency mask with binary values. Like all <a class="reference internal" href="mask_base.html#mask-base"><span class="std std-ref">MaskBase Class</span></a> objects,
BinaryMask is initialized with a 2D or 3D numpy array containing the mask data. The data type (numpy.dtype) of the
initial mask can be either bool, int, or float. The mask is stored as a 3-dimensional boolean-valued numpy array.</p>
<p>The best case scenario for the input mask np array is when the data type is bool. If the data type of the input mask
upon init is int it is expected that all values are either 0 or 1. If the data type
of the mask is float, all values must be within 1e-2 of either 1 or 0. If the array is not set as one of these,
BinaryMask will raise an exception.</p>
<p>BinaryMask (like <a class="reference internal" href="soft_mask.html#soft-mask"><span class="std std-ref">SoftMask Class</span></a>) is one of the return types for the <code class="docutils literal"><span class="pre">run()</span></code> methods of <a class="reference internal" href="../base_classes/mask_separation_base.html#mask-separation-base"><span class="std std-ref">MaskSeparationBase Class</span></a>
-derived objects (this is most of the separation methods in <cite>nussl</cite>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="mask_base.html#mask-base"><span class="std std-ref">MaskBase Class</span></a>: The base class for BinaryMask and SoftMask</li>
<li><a class="reference internal" href="soft_mask.html#soft-mask"><span class="std std-ref">SoftMask Class</span></a>: Similar to BinaryMask, but instead of taking boolean values, takes floats between [0.0 and 1.0].</li>
<li><a class="reference internal" href="../base_classes/mask_separation_base.html#mask-separation-base"><span class="std std-ref">MaskSeparationBase Class</span></a>: Base class for all mask-based separation methods in nussl.</li>
</ul>
</div>
<p class="rubric">Examples</p>
<p>Initializing a mask from a numpy array…</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nussl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># load a file</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">AudioSignal</span><span class="p">(</span><span class="s1">&#39;path/to/file.wav&#39;</span><span class="p">)</span>
<span class="n">stft</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">stft</span><span class="p">()</span>

<span class="c1"># Make a random binary mask with the same shape as the stft with dtype == bool</span>
<span class="n">rand_bool_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">stft</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="n">bin_mask_bool</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">(</span><span class="n">rand_bool_mask</span><span class="p">)</span>

<span class="c1"># Make a random binary mask with the same shape as the stft with dtype == int</span>
<span class="n">rand_int_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">stft</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">bin_mask_int</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">(</span><span class="n">rand_int_mask</span><span class="p">)</span>

<span class="c1"># Make a random binary mask with the same shape as the stft with dtype == float</span>
<span class="n">rand_float_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">stft</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>
<span class="n">bin_mask_int</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">(</span><span class="n">rand_float_mask</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference internal" href="../base_classes/mask_separation_base.html#mask-separation-base"><span class="std std-ref">MaskSeparationBase Class</span></a> -derived methods return <a class="reference internal" href="mask_base.html#mask-base"><span class="std std-ref">MaskBase Class</span></a> masks, like so…</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nussl</span>

<span class="c1"># load a file</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">AudioSignal</span><span class="p">(</span><span class="s1">&#39;path/to/file.wav&#39;</span><span class="p">)</span>

<span class="n">repet</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">Repet</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="n">mask_type</span><span class="o">=</span><span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">)</span>  <span class="c1"># You have to specify that you want Binary Masks back</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">repet</span><span class="p">,</span> <span class="n">nussl</span><span class="o">.</span><span class="n">MaskSeparationBase</span><span class="p">)</span>  <span class="c1"># Repet is a MaskSeparationBase-derived class</span>

<span class="p">[</span><span class="n">background_mask</span><span class="p">,</span> <span class="n">foreground_mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">repet</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># MaskSeparationBase-derived classes return MaskBase objects</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">foreground_mask</span><span class="p">,</span> <span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">)</span>  <span class="c1"># this is True</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">background_mask</span><span class="p">,</span> <span class="n">nussl</span><span class="o">.</span><span class="n">BinaryMask</span><span class="p">)</span>  <span class="c1"># this is True</span>
</pre></div>
</td></tr></table></div>
<dl class="class">
<dt id="separation.masks.binary_mask.BinaryMask">
<em class="property">class </em><code class="descclassname">separation.masks.binary_mask.</code><code class="descname">BinaryMask</code><span class="sig-paren">(</span><em>input_mask</em><span class="sig-paren">)</span><a class="headerlink" href="#separation.masks.binary_mask.BinaryMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="mask_base.html#separation.masks.mask_base.MaskBase" title="separation.masks.mask_base.MaskBase"><code class="xref py py-class docutils literal"><span class="pre">separation.masks.mask_base.MaskBase</span></code></a></p>
<p>Class for creating a Binary Mask to apply to a time-frequency representation of the audio.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>input_mask</strong> (<code class="xref py py-obj docutils literal"><span class="pre">np.ndarray</span></code>) – 2- or 3-D <code class="docutils literal"><span class="pre">np.array</span></code> that represents the mask.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="separation.masks.binary_mask.BinaryMask.mask_as_ints">
<code class="descname">mask_as_ints</code><span class="sig-paren">(</span><em>channel=None</em><span class="sig-paren">)</span><a class="headerlink" href="#separation.masks.binary_mask.BinaryMask.mask_as_ints" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this <code class="docutils literal"><span class="pre">BinaryMask</span></code> as a numpy array of ints of 0’s and 1’s.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">numpy <code class="xref py py-obj docutils literal"><span class="pre">ndarray</span></code> of this <code class="docutils literal"><span class="pre">BinaryMask</span></code> represented as ints instead of bools.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="separation.masks.binary_mask.BinaryMask.inverse_mask">
<code class="descname">inverse_mask</code><span class="sig-paren">(</span><em>channel=None</em><span class="sig-paren">)</span><a class="headerlink" href="#separation.masks.binary_mask.BinaryMask.inverse_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new <code class="docutils literal"><span class="pre">BinaryMask</span></code> object with a logical not applied to flip the values in this <code class="docutils literal"><span class="pre">BinaryMask</span></code> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>channel</strong> (<em>int</em><em>, </em><em>Optional</em>) – Channel number, 0-based.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A new <code class="docutils literal"><span class="pre">BinaryMask</span></code> object that has all of the boolean values flipped.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="separation.masks.binary_mask.BinaryMask.mask_to_binary">
<em class="property">static </em><code class="descname">mask_to_binary</code><span class="sig-paren">(</span><em>mask_</em>, <em>threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#separation.masks.binary_mask.BinaryMask.mask_to_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a binary mask from a soft mask with a True/False threshold.
:param <a href="#id1"><span class="problematic" id="id2">mask_</span></a>:
:param threshold:</p>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Interactive Audio Lab.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>