

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>utils.py &mdash; nussl 0.1.5a9 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="nussl 0.1.5a9 documentation" href="../index.html"/>
        <link rel="up" title="Modules" href="modules.html"/>
        <link rel="next" title="nussl Examples" href="../examples/examples.html"/>
        <link rel="prev" title="spectral_utils.py" href="spectral_utils.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> nussl
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spectral_utils.html">spectral_utils.py</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils.py</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Code Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">nussl</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="modules.html">Modules</a> &raquo;</li>
      
    <li>utils.py</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/src/utils.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-utils">
<span id="utils-py"></span><h1>utils.py<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h1>
<p>Provides utilities for running nussl algorithms that do not belong to any specific algorithm or that are shared
between algorithms.</p>
<dl class="function">
<dt id="utils.find_peak_indices">
<code class="descclassname">utils.</code><code class="descname">find_peak_indices</code><span class="sig-paren">(</span><em>input_array</em>, <em>n_peaks</em>, <em>min_dist=None</em>, <em>do_min=False</em>, <em>threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.find_peak_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will find the indices of the peaks of an input n-dimensional numpy array.
This can be configured to find max or min peak indices, distance between the peaks, and
a lower bound, at which the algorithm will stop searching for peaks (or upper bound if
searching for max). Use exactly the same as find_peak_values().</p>
<p>This function currently only accepts 1-D and 2-D numpy arrays.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li>This function only returns the indices of peaks. If you want to find peak values,</li>
</ul>
<p>use find_peak_values().</p>
<ul>
<li><dl class="first docutils">
<dt>min_dist can be an int or a tuple of length 2.</dt>
<dd><p class="first last">If input_array is 1-D, min_dist must be an integer.
If input_array is 2-D, min_dist can be an integer, in which case the minimum
distance in both dimensions will be equal. min_dist can also be a tuple if
you want each dimension to have a different minimum distance between peaks.
In that case, the 0th value in the tuple represents the first dimension, and
the 1st value represents the second dimension in the numpy array.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">:: find_peak_values()</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_array</strong> &#8211; a 1- or 2- dimensional numpy array that will be inspected.</li>
<li><strong>n_peaks</strong> &#8211; (int) maximum number of peaks to find</li>
<li><strong>min_dist</strong> &#8211; (int) minimum distance between peaks. Default value: len(input_array) / 4</li>
<li><strong>do_min</strong> &#8211; (bool) if True, finds indices at minimum value instead of maximum</li>
<li><strong>threshold</strong> &#8211; (float) the value (scaled between 0.0 and 1.0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>peak_indices</em> &#8211; (list) list of the indices of the peak values</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.find_peak_values">
<code class="descclassname">utils.</code><code class="descname">find_peak_values</code><span class="sig-paren">(</span><em>input_array</em>, <em>n_peaks</em>, <em>min_dist=None</em>, <em>do_min=False</em>, <em>threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.find_peak_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the values of the peaks in a 1-D or 2-D numpy array. Use exactly the same as
find_peak_indices(). This function will find the values of the peaks of an input
n-dimensional numpy array.</p>
<p>This can be configured to find max or min peak values, distance between the peaks, and
a lower bound, at which the algorithm will stop searching for peaks (or upper bound if
searching for max).</p>
<p>This function currently only accepts 1-D and 2-D numpy arrays.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li>This function only returns the indices of peaks. If you want to find peak values,</li>
</ul>
<p>use find_peak_values().</p>
<ul>
<li><dl class="first docutils">
<dt>min_dist can be an int or a tuple of length 2.</dt>
<dd><p class="first last">If input_array is 1-D, min_dist must be an integer.
If input_array is 2-D, min_dist can be an integer, in which case the minimum
distance in both dimensions will be equal. min_dist can also be a tuple if
you want each dimension to have a different minimum distance between peaks.
In that case, the 0th value in the tuple represents the first dimension, and
the 1st value represents the second dimension in the numpy array.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">:: find_peak_indices()</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_array</strong> &#8211; a 1- or 2- dimensional numpy array that will be inspected.</li>
<li><strong>n_peaks</strong> &#8211; (int) maximum number of peaks to find</li>
<li><strong>min_dist</strong> &#8211; (int) minimum distance between peaks. Default value: len(input_array) / 4</li>
<li><strong>do_min</strong> &#8211; (bool) if True, finds indices at minimum value instead of maximum</li>
<li><strong>threshold</strong> &#8211; (float) the value (scaled between 0.0 and 1.0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>peak_values</em> &#8211; (list) list of the values of the peak values</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.json_ready_numpy_array">
<code class="descclassname">utils.</code><code class="descname">json_ready_numpy_array</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.json_ready_numpy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Adapted from:
<a class="reference external" href="http://stackoverflow.com/a/27948073/5768001">http://stackoverflow.com/a/27948073/5768001</a>
:param array: np array to make json ready.</p>
<p>Returns:</p>
</dd></dl>

<dl class="function">
<dt id="utils.json_serialize_numpy_array">
<code class="descclassname">utils.</code><code class="descname">json_serialize_numpy_array</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.json_serialize_numpy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a JSON string of the numpy array.</p>
<p class="rubric">Notes</p>
<p>The generated JSON strings can be converted back to numpy arrays with load_numpy_json()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> &#8211; (numpy array) any numpy array to convert to JSON</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(string) JSON-ified numpy array.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">load_numpy_json()</p>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.load_numpy_json">
<code class="descclassname">utils.</code><code class="descname">load_numpy_json</code><span class="sig-paren">(</span><em>array_json</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.load_numpy_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a JSON-ified numpy array back into a regular numpy array.</p>
<p class="rubric">Notes</p>
<p>This function is only guaranteed to work with JSON generated by json_serialize_numpy_array()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array_json</strong> &#8211; (string) JSON-ified nump array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(numpy array) numpy array from the input JSON string</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">json_serialize_numpy_array()</p>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.json_numpy_obj_hook">
<code class="descclassname">utils.</code><code class="descname">json_numpy_obj_hook</code><span class="sig-paren">(</span><em>dct</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.json_numpy_obj_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Decodes a previously encoded numpy ndarray
with proper shape and dtype
from: <a class="reference external" href="http://stackoverflow.com/a/27948073/5768001">http://stackoverflow.com/a/27948073/5768001</a>
:param dct: (dict) json encoded ndarray
:return: (ndarray) if input was an encoded ndarray</p>
</dd></dl>

<dl class="function">
<dt id="utils.add_mismatched_arrays">
<code class="descclassname">utils.</code><code class="descname">add_mismatched_arrays</code><span class="sig-paren">(</span><em>array1</em>, <em>array2</em>, <em>truncate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.add_mismatched_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Will add two 1-D numpy arrays of different length. If truncate is false, it will expand
the resultant array to the larger of the two, if True it will truncate the resultant
array to the smaller of the two.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array1</strong> &#8211; (np.array) 1-D numeric array</li>
<li><strong>array2</strong> &#8211; (np.array) 1-D numeric array</li>
<li><strong>truncate</strong> &#8211; (Bool) If True, will truncate the resultant array to the smaller of the two</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">One array added from the two input arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examples/examples.html" class="btn btn-neutral float-right" title="nussl Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spectral_utils.html" class="btn btn-neutral" title="spectral_utils.py" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Interactive Audio Lab.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.5a9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>