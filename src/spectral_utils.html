<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>spectral_utils.py &#8212; nussl 0.1.5a10 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.5a10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="utils.py" href="utils.html" />
    <link rel="prev" title="constants.py" href="constants.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          nussl</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="separation/separation_classes.html">Separation Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation/evaluation_classes.html">Evaluation Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformers/transformer_classes.html">Transformer Classes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Code Examples</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">spectral_utils.py</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="constants.html" title="Previous Chapter: constants.py"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; constants.py</span>
    </a>
  </li>
  <li>
    <a href="utils.html" title="Next Chapter: utils.py"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">utils.py &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/src/spectral_utils.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="module-spectral_utils">
<span id="spectral-utils-py"></span><h1>spectral_utils.py<a class="headerlink" href="#module-spectral_utils" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="spectral_utils.plot_stft">
<code class="descclassname">spectral_utils.</code><code class="descname">plot_stft</code><span class="sig-paren">(</span><em>signal</em>, <em>file_name</em>, <em>title=None</em>, <em>win_length=None</em>, <em>hop_length=None</em>, <em>window_type=None</em>, <em>sample_rate=None</em>, <em>n_fft_bins=None</em>, <em>freq_max=None</em>, <em>show_interactive_plot=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.plot_stft" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs an image of an stft plot of input audio, signal. This uses matplotlib to create the output file.
You can specify the same all of the same parameters that are in e_stft(). By default, the StftParams defaults
are used for any values not provided in (win_length, hop_length, and window_type).
Title is settable by user and there is a flag to show an interactive matplotlib graph, as well.</p>
<p class="rubric">Notes</p>
<p>To find out what output formats are available for your machine run the following code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_supported_filetypes</span><span class="p">())</span>
</pre></div>
</div>
<p>(From here: <a class="reference external" href="http://stackoverflow.com/a/7608273/5768001">http://stackoverflow.com/a/7608273/5768001</a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>signal</strong> – (np.array) input time series signal that will be plotted</li>
<li><strong>file_name</strong> – (str) path to file that will be output. Will overwrite any file that is already there.
Uses mat</li>
<li><strong>title</strong> – (string) (Optional) Title to go at top of graph. Defaults to ‘Spectrogram of [file_name]’</li>
<li><strong>win_length</strong> – (int) (Optional) number of samples per window. Defaults to StftParams default.</li>
<li><strong>hop_length</strong> – (int) (Optional) number of samples between the start of adjacent windows, or “hop”.
Defaults to StftParams default.</li>
<li><strong>sample_rate</strong> – (int) (Optional) sample rate of input signal.  Defaults to StftParams default.</li>
<li><strong>window_type</strong> – (string) (Optional) type of window to use. Using WindowType object is recommended.
Defaults to StftParams default.</li>
<li><strong>n_fft_bins</strong> – (int) (Optional) number of fft bins per time window.
If not specified, defaults to next highest power of 2 above window_length. Defaults to StftParams default.</li>
<li><strong>freq_max</strong> – (int) Max frequency to display. Defaults to 44100Hz</li>
<li><strong>show_interactive_plot</strong> – (bool) (Optional) Flag indicating if plot should be shown when function is run.
Defaults to False</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Set up sine wave parameters</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">Constants</span><span class="o">.</span><span class="n">DEFAULT_SAMPLE_RATE</span> <span class="c1"># 44.1kHz</span>
<span class="n">n_sec</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># seconds</span>
<span class="n">duration</span> <span class="o">=</span> <span class="n">n_sec</span> <span class="o">*</span> <span class="n">sr</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">300</span> <span class="c1"># Hz</span>

<span class="c1"># Make sine wave array</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">freq</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># plot it and save it in path &#39;path/to/sine_wav.png&#39;</span>
<span class="n">nussl</span><span class="o">.</span><span class="n">plot_stft</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;path/to/sine_wav.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.e_stft">
<code class="descclassname">spectral_utils.</code><code class="descname">e_stft</code><span class="sig-paren">(</span><em>signal</em>, <em>window_length</em>, <em>hop_length</em>, <em>window_type</em>, <em>n_fft_bins=None</em>, <em>remove_reflection=True</em>, <em>remove_padding=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.e_stft" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes a short time fourier transform (STFT) of a 1D numpy array input signal.
This will zero pad the signal by half a hop_length at the beginning to reduce the window
tapering effect from the first window. It also will zero pad at the end to get an integer number of hops.</p>
<p>By default, this function removes the FFT data that is a reflection from over Nyquist. There is an option
to suppress this behavior and have this function include data from above Nyquist, but since the
inverse STFT function, e_istft(), expects data without the reflection, the onus is on the user to remember
to set the reconstruct_reflection flag in e_istft() input.</p>
<p>Additionally, this function assumes a single channeled audio signal and is not guaranteed to work on
multichannel audio. If you want to do an STFT on multichannel audio see the AudioSignal object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>signal</strong> – 1D numpy array containing audio data. (REAL)</li>
<li><strong>window_length</strong> – (int) number of samples per window</li>
<li><strong>hop_length</strong> – (int) number of samples between the start of adjacent windows, or “hop”</li>
<li><strong>window_type</strong> – (string) type of window to use. Using WindowType object is recommended.</li>
<li><strong>n_fft_bins</strong> – (int) (Optional) number of fft bins per time window.</li>
<li><strong>not specified</strong><strong>, </strong><strong>defaults to next highest power of 2 above window_length</strong> (<em>If</em>) – </li>
<li><strong>remove_reflection</strong> – (bool) (Optional) if True, this will remove reflected STFT data above the Nyquist point.</li>
<li><strong>not specified</strong><strong>, </strong><strong>defaults to True.</strong> (<em>If</em>) – </li>
<li><strong>remove_padding</strong> – (bool) (Optional) if True, this will remove the extra padding added when doing the STFT.</li>
<li><strong>to True.</strong> (<em>Defaults</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">2D  numpy array with complex STFT data.
Data is of shape (num_time_blocks, num_fft_bins). These numbers are determined by length of the input signal,
on internal zero padding (explained at top), and n_fft_bins/remove_reflection input (see example below).</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Set up sine wave parameters</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">Constants</span><span class="o">.</span><span class="n">DEFAULT_SAMPLE_RATE</span> <span class="c1"># 44.1kHz</span>
<span class="n">n_sec</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># seconds</span>
<span class="n">duration</span> <span class="o">=</span> <span class="n">n_sec</span> <span class="o">*</span> <span class="n">sr</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">300</span> <span class="c1"># Hz</span>

<span class="c1"># Make sine wave array</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">freq</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Set up e_stft() parameters</span>
<span class="n">win_type</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">WindowType</span><span class="o">.</span><span class="n">HANN</span>
<span class="n">win_length</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="n">hop_length</span> <span class="o">=</span> <span class="n">win_length</span> <span class="o">/</span> <span class="mi">2</span>

<span class="c1"># Run e_stft()</span>
<span class="n">stft</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">e_stft</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">win_length</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">,</span> <span class="n">win_type</span><span class="p">)</span>
<span class="c1"># stft has shape (win_length // 2 + 1 , duration / hop_length)</span>

<span class="c1"># Get reflection</span>
<span class="n">stft_with_reflection</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">e_stft</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">win_length</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">,</span> <span class="n">win_type</span><span class="p">,</span> <span class="n">remove_reflection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># stft_with_reflection has shape (win_length, duration / hop_length)</span>

<span class="c1"># Change number of fft bins per hop</span>
<span class="n">num_bins</span> <span class="o">=</span> <span class="mi">4096</span>
<span class="n">stft_more_bins</span> <span class="o">=</span> <span class="n">e_stft</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">win_length</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">,</span> <span class="n">win_type</span><span class="p">,</span> <span class="n">n_fft_bins</span><span class="o">=</span><span class="n">num_bins</span><span class="p">)</span>
<span class="c1"># stft_more_bins has shape (num_bins // 2 + 1, duration / hop_length)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.librosa_stft_wrapper">
<code class="descclassname">spectral_utils.</code><code class="descname">librosa_stft_wrapper</code><span class="sig-paren">(</span><em>signal</em>, <em>window_length</em>, <em>hop_length</em>, <em>window_type=None</em>, <em>remove_reflection=True</em>, <em>center=True</em>, <em>n_fft_bins=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.librosa_stft_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>signal</strong> – </li>
<li><strong>window_length</strong> – </li>
<li><strong>hop_length</strong> – </li>
<li><strong>window_type</strong> – </li>
<li><strong>remove_reflection</strong> – </li>
<li><strong>center</strong> – </li>
<li><strong>n_fft_bins</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.e_istft">
<code class="descclassname">spectral_utils.</code><code class="descname">e_istft</code><span class="sig-paren">(</span><em>stft</em>, <em>window_length</em>, <em>hop_length</em>, <em>window_type</em>, <em>reconstruct_reflection=True</em>, <em>remove_padding=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.e_istft" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes an inverse_mask short time fourier transform (STFT) from a 2D numpy array of complex values. By default
this function assumes input STFT has no reflection above Nyquist and will rebuild it, but the
reconstruct_reflection flag overrides that behavior.</p>
<p>Additionally, this function assumes a single channeled audio signal and is not guaranteed to work on
multichannel audio. If you want to do an iSTFT on multichannel audio see the AudioSignal object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stft</strong> – complex valued 2D numpy array containing STFT data</li>
<li><strong>window_length</strong> – (int) number of samples per window</li>
<li><strong>hop_length</strong> – (int) number of samples between the start of adjacent windows, or “hop”</li>
<li><strong>window_type</strong> – (deprecated)</li>
<li><strong>reconstruct_reflection</strong> – (bool) (Optional) if True, this will recreate the removed reflection</li>
<li><strong>above the Nyquist. If False</strong><strong>, </strong><strong>this assumes that the input STFT is complete. Default is True.</strong> (<em>data</em>) – </li>
<li><strong>remove_padding</strong> – (bool) (Optional) if True, this function will remove the first and
last (window_length - hop_length) number of samples. Defaults to False.</li>
<li><strong>massage the output so that it is in a format that it expects. remove_reflection is still works in this</strong> (<em>will</em>) – </li>
<li><strong>Note</strong> (<em>mode.</em>) – librosa’s works differently than nussl’s and may produce different output.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">1D numpy array containing an audio signal representing the original signal used to make stft</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Set up sine wave parameters</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">Constants</span><span class="o">.</span><span class="n">DEFAULT_SAMPLE_RATE</span> <span class="c1"># 44.1kHz</span>
<span class="n">n_sec</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># seconds</span>
<span class="n">duration</span> <span class="o">=</span> <span class="n">n_sec</span> <span class="o">*</span> <span class="n">sr</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">300</span> <span class="c1"># Hz</span>

<span class="c1"># Make sine wave array</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">freq</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Set up e_stft() parameters</span>
<span class="n">win_type</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">WindowType</span><span class="o">.</span><span class="n">HANN</span>
<span class="n">win_length</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="n">hop_length</span> <span class="o">=</span> <span class="n">win_length</span> <span class="o">/</span> <span class="mi">2</span>

<span class="c1"># Get an stft</span>
<span class="n">stft</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">e_stft</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">win_length</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">,</span> <span class="n">win_type</span><span class="p">)</span>

<span class="n">calculated_signal</span> <span class="o">=</span> <span class="n">nussl</span><span class="o">.</span><span class="n">e_istft</span><span class="p">(</span><span class="n">stft</span><span class="p">,</span> <span class="n">win_length</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.librosa_istft_wrapper">
<code class="descclassname">spectral_utils.</code><code class="descname">librosa_istft_wrapper</code><span class="sig-paren">(</span><em>stft</em>, <em>window_length</em>, <em>hop_length</em>, <em>window_type</em>, <em>remove_reflection=False</em>, <em>center=True</em>, <em>original_signal_length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.librosa_istft_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for calling into librosa’s istft function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stft</strong> – </li>
<li><strong>window_length</strong> – </li>
<li><strong>hop_length</strong> – </li>
<li><strong>window_type</strong> – </li>
<li><strong>remove_reflection</strong> – </li>
<li><strong>center</strong> – </li>
<li><strong>original_signal_length</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.e_stft_plus">
<code class="descclassname">spectral_utils.</code><code class="descname">e_stft_plus</code><span class="sig-paren">(</span><em>signal</em>, <em>window_length</em>, <em>hop_length</em>, <em>window_type</em>, <em>sample_rate</em>, <em>n_fft_bins=None</em>, <em>remove_reflection=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.e_stft_plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Does a short time fourier transform (STFT) of the signal (by calling e_stft() ), but also calculates
the power spectral density (PSD), frequency and time vectors for the calculated STFT. This function does not
give you as many options as e_stft() (wrt removing the reflection and using librosa). If you need that
flexibility, it is recommended that you either use e_stft() or use an AudioSignal object.</p>
<p>Use this is situations where you need more than just the STFT data. For instance, this is used in plot_stft()
to get the frequency vector to graph. In situations where you don’t need this extra data it is
more efficient to use e_stft().</p>
<p>Additionally, this function assumes a single channeled audio signal and is not guaranteed to work on
multichannel audio. If you want to do an STFT on multichannel audio see the AudioSignal object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>signal</strong> – 1D numpy array containing audio data. (REAL?COMPLEX?INTEGER?)</li>
<li><strong>window_length</strong> – (int) number of samples per window</li>
<li><strong>hop_length</strong> – (int) number of samples between the start of adjacent windows, or “hop”</li>
<li><strong>window_type</strong> – (string) type of window to use. Using WindowType object is recommended.</li>
<li><strong>sample_rate</strong> – (int) the intended sample rate, this is used in the calculation of the frequency vector</li>
<li><strong>n_fft_bins</strong> – (int) (Optional) number of fft bins per time window.</li>
<li><strong>not specified</strong><strong>, </strong><strong>defaults to next highest power of 2 above window_length</strong> (<em>If</em>) – </li>
<li><strong>remove_reflection</strong> (<em>bool</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>stft</em> – (np.ndarray) a 2D matrix short time fourier transform data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.make_window">
<code class="descclassname">spectral_utils.</code><code class="descname">make_window</code><span class="sig-paren">(</span><em>window_type</em>, <em>length</em>, <em>symmetric=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.make_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an <cite>np.array</cite> populated with samples of a normalized window of type <cite>window_type</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>window_type</strong> (<em>basestring</em>) – Type of window to create, string can be</li>
<li><strong>length</strong> (<em>int</em>) – length of window</li>
<li><strong>symmetric</strong> (<em>bool</em>) – False (default) generates a periodic window (for use in spectral analysis).
True generates a symmetric window (for use in filter design).
Does nothing for rectangular window</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>window (np.array)</em> – np array with a window of type window_type</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="spectral_utils.get_window_function">
<code class="descclassname">spectral_utils.</code><code class="descname">get_window_function</code><span class="sig-paren">(</span><em>window_type</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.get_window_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a window function from scipy.signal
:param window_type: (string) name of the window function from scipy.signal</p>
<p>Returns: callable window function from scipy.signal</p>
</dd></dl>

<dl class="class">
<dt id="spectral_utils.StftParams">
<em class="property">class </em><code class="descclassname">spectral_utils.</code><code class="descname">StftParams</code><span class="sig-paren">(</span><em>sample_rate</em>, <em>window_length=None</em>, <em>hop_length=None</em>, <em>window_type=None</em>, <em>n_fft_bins=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.StftParams" title="Permalink to this definition">¶</a></dt>
<dd><p>The StftParams class is a container for information needed to run an STFT or iSTFT.
This is meant as a convenience and does not actually perform any calculations within. It should
get “decomposed” by the time e_stft() or e_istft() are called, so that every attribute in this
object is a parameter to one of those functions.</p>
<p>Every class that inherits from the SeparationBase class has an StftParms object, and this
is the only way that a top level user has access to the STFT parameter settings that
all of the separation algorithms are built upon.
This object will get passed around instead of each of these individual attributes.</p>
<dl class="attribute">
<dt id="spectral_utils.StftParams.window_length">
<code class="descname">window_length</code><a class="headerlink" href="#spectral_utils.StftParams.window_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="spectral_utils.StftParams.hop_length">
<code class="descname">hop_length</code><a class="headerlink" href="#spectral_utils.StftParams.hop_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="spectral_utils.StftParams.n_fft_bins">
<code class="descname">n_fft_bins</code><a class="headerlink" href="#spectral_utils.StftParams.n_fft_bins" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Returns</em></p>
</dd></dl>

<dl class="attribute">
<dt id="spectral_utils.StftParams.window_overlap">
<code class="descname">window_overlap</code><a class="headerlink" href="#spectral_utils.StftParams.window_overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of samples of overlap between adjacent time slices.
This is calculated like self.window_length - self.hop_length
This property is not settable.</p>
</dd></dl>

<dl class="method">
<dt id="spectral_utils.StftParams.to_json">
<code class="descname">to_json</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.StftParams.to_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="spectral_utils.StftParams.from_json">
<em class="property">static </em><code class="descname">from_json</code><span class="sig-paren">(</span><em>json_string</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral_utils.StftParams.from_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Interactive Audio Lab.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>